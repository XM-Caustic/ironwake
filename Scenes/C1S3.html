<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>IRONWAKE CLIENT</title>
  <style>
    body {
      margin: 0;
      background-color: #222;
      background-image: url('../../Backgrounds/carnight.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100%;
      width: 100%;
      color: #fff;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    #fade-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #000;
      z-index: 9999;
      pointer-events: none;
      opacity: 1;
      transition: opacity 0.8s ease;
    }

    #game-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-end;
    }

    #textbox {
      position: relative;
      width: 95%;
      max-width: 800px;
      margin-bottom: 30px;
      background: rgba(0, 0, 0, 0.8);
      border-radius: 10px;
      padding: 20px;
      display: flex;
      align-items: flex-start;
      cursor: pointer;
      box-sizing: border-box;
    }

    #portrait {
      width: 180px;
      height: 180px;
      background-color: #111;
      margin-right: 15px;
      border-radius: 10px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      position: relative;
    }

    /* Compact style if only name is shown */
    #portrait.name-only {
      width: auto;
      height: auto;
      background: none;
      margin-right: 15px;
    }

    #char-name {
      position: absolute;
      top: -30px;
      left: 0;
      background: #000;
      padding: 5px 10px;
      border-radius: 8px 8px 0 0;
      font-weight: bold;
    }

    #portrait.name-only #char-name {
      position: static;
      border-radius: 8px;
      top: auto;
      left: auto;
    }

    #text-content {
      flex: 1;
      position: relative;
    }

    #click-hint {
      font-size: 0.8em;
      color: #aaa;
      margin-top: 10px;
      display: none;
    }

    #chapter-box {
      position: absolute;
      top: 20px;
      left: -300px;
      background: rgba(0, 0, 0, 0.9);
      padding: 15px 20px;
      border-radius: 0 10px 10px 0;
      transition: left 0.5s ease-in-out;
      z-index: 10;
    }

    #chapter-box.show {
      left: 20px;
    }

    #title-box {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.9);
      padding: 15px 20px;
      border-radius: 10px;
      z-index: 10;
      font-weight: bold;
    }

    @media screen and (max-width: 600px) {
      #textbox {
        flex-direction: column;
        align-items: center;
      }

      #portrait {
        margin-bottom: 10px;
        margin-right: 0;
      }

      #char-name {
        top: 0;
        left: 50%;
        transform: translateX(-50%);
      }
    }
  </style>
</head>
<body>
  <div id="fade-overlay"></div>
  <div id="title-box">Chapter 1 - 2<br>
    Kaden<br>
    August 29, 2012
  </div>
  <div id="game-container">
    <div id="textbox">
      <div id="portrait">
        <div id="char-name"></div>
      </div>
      <div id="text-content">
        <div id="dialogue-text"></div>
        <div id="click-hint">(Click anywhere in this box to continue...)</div>
      </div>
    </div>
  </div>

  <script>
    const scenes = [
      {
        character: '',
        portrait: '',
        text: `A raven watches from above, flying away as it notices the car. The crew drove to The Corner Plate, where the crew normally hangs out for missions, until they got their hideout.`,
      },   
      {
        character: 'Charlie',
        portrait: 'charlie.png',
        text: `"Alright, what do you guys want?" Charlie asked, waiting in line at the drive through.`,
      },         
      {
        character: 'Kurt',
        portrait: 'kurt.png',
        text: `"I'll just get a Corner Club." Kurt said, looking at the cars in front of them.`,
      },         
      {
        character: 'Noah',
        portrait: 'noah.png',
        text: `"I'd like a Diner Chilli Bowl with Ginger Ale." Noah replied, rubbing his eyes.`,
      },         
      {
        character: 'Kaden',
        portrait: 'kaden.png',
        text: `"You can get me anything, I'm not choosy." Kaden responded, leaning on the car's seat.`,
      },         
      {
        character: '',
        portrait: '',
        text: `Kaden looks at the car's rear view mirror. He found a man in a guille suit landing at the back of the car, approaching their vehicle. Kaden gets out of the car, loading his Dual Desert Eagles.`,
      },         
      {
        character: 'Charlie',
        portrait: 'charlie.png',
        text: `"H-Hey, where is he going?!" Charlie exclaimed, turning around on her seat.`,
      },         
      {
        character: 'Kaden',
        portrait: 'kaden.png',
        text: `"I'm showing this crew a demonstration." Kaden said, running towards the man in the guille suit.`,
      },         
    ];

    let index = 0;
    const charName = document.getElementById('char-name');
    const portrait = document.getElementById('portrait');
    const dialogue = document.getElementById('dialogue-text');
    const clickHint = document.getElementById('click-hint');
    const fadeOverlay = document.getElementById('fade-overlay');

    function showScene(i) {
      const scene = scenes[i];
      dialogue.innerHTML = scene.text;
      clickHint.style.display = i === 0 ? 'block' : 'none';

      // Hide portrait & name if both empty
      if (!scene.character && !scene.portrait) {
        portrait.style.display = 'none';
        charName.textContent = '';
      }
      // Name but no portrait â†’ compact name box
      else if (scene.character && !scene.portrait) {
        portrait.style.display = 'block';
        portrait.classList.add('name-only');
        charName.textContent = scene.character;
        portrait.style.backgroundImage = 'none';
      }
      // Normal portrait + name
      else {
        portrait.style.display = 'block';
        portrait.classList.remove('name-only');
        charName.textContent = scene.character || '';
        portrait.style.backgroundImage = scene.portrait
          ? `url('../../Characters/${scene.portrait}')`
          : 'none';
      }
    }

    document.getElementById('textbox').addEventListener('click', () => {
      index++;
      if (index < scenes.length) {
        showScene(index);
      } else {
        fadeOverlay.style.opacity = 1;
        setTimeout(() => {
          window.location.href = '../Scenes/C1S4.html';
        }, 800);
      }
    });

    window.addEventListener('load', () => {
      fadeOverlay.style.opacity = 0;
    });

    showScene(index);
  </script>
</body>
</html>
